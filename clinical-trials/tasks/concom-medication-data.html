<div id=D__ID>
  <div>
      VmInclude:__COMPONENT__/module/grid.v1.html
  </div>
  <script>
  function F__ID(){
      //-------------------------------------
      VmInclude:__COMPONENT__/module/grid.v1.js
      VmInclude:__CURRENT_PATH__/task-data.js
      //-------------------------------------
        var fields="Medication,Dose,Units,Frequency,Route,Indication,Start_Date,End_Date,Ongoing";
        m.fields="_Form,Status|S3,Notes|NT,Participant_ID|Participant_uid,Participant,"+fields+",Submit Date|DateTime,Submitted by|Author,_Delete";
        m.form_fields="Participant_uid,Participant,"+fields;
        //-------------------------------------
        m.cell_render=function(records,I,field,td,set_value,source){
            switch(field){
                case 'S3':
                    records[I].vm_custom[field]=true;
                    td.html("<span style='color:"+records[I][field]+"'>&#x25cf;</span>");
                    break;
                case 'NT':
                    records[I].vm_custom[field]=true;
                    if(m.records[I].UID===undefined) return;
                    var color=records[I].NC;     if(color==="") color="#000000"
                    var value=records[I][field];  if(value==="") value='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                    td.html("<u style='cursor:pointer;color:"+color+"'>"+value+"</u>");
                    td.find('u').on('click',function(){
                        $vm.load_module_v2(prefix+'notes-data',$vm.root_layout_content_slot,{
                            task_module_name:$vm.vm['__ID'].name,
                            record:records[I]
                        });
                    });
                    break;
                case 'Participant_uid':
                case 'Participant':
                    records[I].vm_readonly[field]=true;
                    break;
                case 'Start_Date':
                case 'End_Date':
                    records[I].vm_custom[field]=true;
                    td.html('<input type="date" style="border:0" />')
                    td.find('input').val(records[I][field])
                    td.find('input').focusout(function() {
                        set_value(td.find('input').val(),records,I,field);
                    });
                    break;
                case 'Ongoing':
                    var html="<select style='border:0;''>\
                            <option>Yes</option>\
                            <option>No</option>\
                        </select>\
                    ";
                    VmInclude:__COMPONENT__/grid/field_select.js
                break;
            }
        }
    }
</script>
<style>
  VmInclude:__COMPONENT__/module/grid.v1.css
</style>
