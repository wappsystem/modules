<div id=D__ID>
  <div>
      VmInclude:__CURRENT_PATH__/../../components/grid.v1h.html
  </div>
  <script>
  function F__ID(){
      //-------------------------------------
      VmInclude:__COMPONENT__/module/grid.v1.js
      VmInclude:__CURRENT_PATH__/task-data.js
      //-------------------------------------
      var fields="rec_drugs"
      fields+=",marijuana_used,marijuana_how_often,marijuana_latest_use";
      fields+=",cocaine_used,cocaine_how_often,cocaine_latest_use";
      fields+=",amphetamines_used,amphetamines_how_often,amphetamines_latest_use";
      fields+=",hallucinogens_used,hallucinogens_how_often,hallucinogens_latest_use";
      fields+=",heroin_used,heroin_how_often,heroin_latest_use";
      fields+=",opiates_used,opiates_how_often,opiates_latest_use";
      fields+=",inhalants_used,inhalants_how_often,inhalants_latest_use";
      m.fields="_Form,Status|S3,Notes|NT,Participant_ID|Participant_uid,Participant,"+fields+",Submit Date|DateTime,Submitted by|Author,_Delete";
      m.form_fields="Participant_uid,Participant,"+fields;
      //-------------------------------------
      $('#title__ID').text('Recreational Drugs')
      //-------------------------------------
      m.cell_render=function(records,I,field,td,set_value,source){
          switch(field){
              case 'S3':
                  records[I].vm_custom[field]=true;
                  td.html("<span style='color:"+records[I][field]+"'>&#x25cf;</span>");
                  break;
              case 'NT':
                  records[I].vm_custom[field]=true;
                  if(m.records[I].UID===undefined) return;
                  var color=records[I].NC;     if(color==="") color="#000000"
                  var value=records[I][field];  if(value==="") value='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;';
                  td.html("<u style='cursor:pointer;color:"+color+"'>"+value+"</u>");
                  td.find('u').on('click',function(){
                      $vm.load_module_v2(prefix+'notes-data',$vm.root_layout_content_slot,{
                          task_module_name:$vm.vm['__ID'].name,
                          record:records[I]
                      });
                  });
                  break;
              case 'Participant_uid':
              case 'Participant':
              case 'bmi':
              case 'weight':
              case 'height':
                  records[I].vm_readonly[field]=true;
                  break;
          }
      }
}
  </script>
  <style>
    VmInclude:__COMPONENT__/module/grid.v1.css
  </style>
</div>
